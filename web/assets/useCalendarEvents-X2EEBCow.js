import{r as e}from"./react-vendor-DeomjPLV.js";import{d as o}from"./index-BTVIKfVS.js";const t={"PsicÃ³logo ClÃ­nico":{bg:"#f3e8ff",border:"#9333ea",text:"#581c87",icon:"ðŸ©º"},"FonoaudiÃ³logo":{bg:"#fef3c7",border:"#d97706",text:"#78350f",icon:"ðŸ‘„"},"Terapeuta Ocupacional":{bg:"#dcfce7",border:"#16a34a",text:"#14532d",icon:"ðŸ¤²"},"Analista do Comportamento":{bg:"#fce7f3",border:"#db2777",text:"#831843",icon:"ðŸŽ¯"},AT:{bg:"#ede9fe",border:"#8b5cf6",text:"#5b21b6",icon:"ðŸ‘¥"},"Supervisor ClÃ­nico":{bg:"#fef9c3",border:"#ca8a04",text:"#713f12",icon:"ðŸ‘¨â€ðŸ’¼"},"Educador FÃ­sico":{bg:"#fee2e2",border:"#dc2626",text:"#7f1d1d",icon:"ðŸƒ"},Musicoterapeuta:{bg:"#f3f4f6",border:"#4b5563",text:"#1f2937",icon:"ðŸŽµ"},Pedagogo:{bg:"#d9f99d",border:"#65a30d",text:"#365314",icon:"ðŸ“š"},Nutricionista:{bg:"#e0f2fe",border:"#0ea5e9",text:"#0c4a6e",icon:"ðŸ¥—"},"MÃ©dico":{bg:"#fee2e2",border:"#dc2626",text:"#7f1d1d",icon:"ðŸ‘¨â€âš•ï¸"},"Coordenador ClÃ­nico":{bg:"#f5f5f4",border:"#292524",text:"#1c1917",icon:"ðŸ‘¨â€ðŸ’¼"},Recepcionista:{bg:"#e0f7fe",border:"#0891b2",text:"#164e63",icon:"ðŸ‘©â€ðŸ’¼"},"EstagiÃ¡rio":{bg:"#f3e8ff",border:"#9333ea",text:"#581c87",icon:"ðŸ‘¨â€ðŸŽ“"}},r={slotMinTime:"07:00:00",slotMaxTime:"20:00:00",height:"calc(100vh - 12rem)",eventMinHeight:60,dayMaxEvents:3,moreLinkText:"mais",allDaySlot:!1,nowIndicator:!0,locale:"pt-br",buttonText:{today:"Hoje",month:"MÃªs",week:"Semana",day:"Dia"},views:{timeGridDay:{titleFormat:{year:"numeric",month:"long",day:"numeric",weekday:"long"}},timeGridWeek:{titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short",day:"numeric"}},dayGridMonth:{titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short"}}},slotLabelFormat:[{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridiem:!1}]};function a(){const[r,a]=e.useState([]),[i,n]=e.useState([]),[s,d]=e.useState([]),[c,f]=e.useState(!0),[l,b]=e.useState(null),m=e.useCallback(async()=>{f(!0),b(null);try{const[e,r,i]=await Promise.all([o.profissionais.toArray(),o.pacientes.toArray(),o.atendimentos.toArray()]);n(e),d(r);const s=await Promise.all(i.filter(e=>!e.cancelado).map(async o=>{const a=e.find(e=>e.id===o.profissionalId),i=r.find(e=>e.id===o.pacienteId);if(!a||!i)return null;const n=t[a.funcao];return{id:o.id,title:`${i.nome} - ${a.nome}`,start:o.inicio.toISOString(),end:o.fim.toISOString(),backgroundColor:n.bg,borderColor:n.border,textColor:n.text,profissionalId:a.id,pacienteId:i.id,tipo:a.funcao,observacoes:o.observacoes||"",extendedProps:{tooltip:`${n.icon} ${i.nome}<br><span class="text-gray-500">${a.nome}</span>`,icon:n.icon,profissional:a.nome}}}));a(s.filter(e=>null!==e))}catch(e){b(e instanceof Error?e:new Error("Erro ao carregar dados"))}finally{f(!1)}},[]);e.useEffect(()=>{m()},[m]);const u=e.useCallback(e=>r.find(o=>o.id===e),[r]),p=e.useCallback(e=>({id:e.id,profissionalId:e.profissionalId,pacienteId:e.pacienteId,tipo:e.tipo,inicio:new Date(e.start),fim:new Date(e.end),observacoes:e.observacoes}),[]),g=e.useMemo(()=>{const e=new Map;return r.forEach(o=>{const t=new Date(o.start).toDateString();e.has(t)||e.set(t,[]),e.get(t).push(o)}),e},[r]),y=e.useMemo(()=>{const e=new Map;return r.forEach(o=>{e.has(o.profissionalId)||e.set(o.profissionalId,[]),e.get(o.profissionalId).push(o)}),e},[r]);return{events:r,profissionais:i,pacientes:s,loading:c,error:l,loadData:m,findEventById:u,convertEventToAtendimento:p,eventsByDate:g,eventsByProfissional:y}}export{r as C,a as u};
